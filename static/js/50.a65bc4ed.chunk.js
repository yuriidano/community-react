"use strict";(self.webpackChunkreact_1=self.webpackChunkreact_1||[]).push([[50],{6050:(e,s,a)=>{a.r(s),a.d(s,{default:()=>O});const t="Chat_chat__RURbJ";var r=a(1134),c=a(2791);const l={form:"ChatForm_form__5XF+Y",messageArea:"ChatForm_messageArea__CerHm",button:"ChatForm_button__O8-cB",buttonDisabled:"ChatForm_buttonDisabled__SKi20",icon:"ChatForm_icon__XzG4I"};var o=a(1418),n=a.n(o),_=a(6189),m=a(184);const i=(0,_.Z)((0,m.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var d=a(3085),h=a(6143);const u=()=>{const e=(0,d.TL)(),s=(0,d.CG)((e=>e.chat.status)),[a,t]=(0,c.useState)(!0),{register:o,handleSubmit:_,reset:u,formState:{errors:g}}=(0,r.cI)();return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("form",{onSubmit:_((s=>{const{message:a}=s;e((0,h.bG)(a)),u({message:""}),t(!0)})),className:l.form,children:[(0,m.jsx)("div",{className:l.formBody,children:(0,m.jsx)("textarea",{onInput:e=>{let s=e.currentTarget;""!==s.value?t(!1):t(!0),s.style.height="auto",s.style.height=s.scrollHeight+"px"},...o("message",{required:"field is required"}),className:n()(l.messageArea,{[l.error]:g.message}),placeholder:"Message"})}),(0,m.jsx)("button",{disabled:"ready"!==s||a,className:n()(l.button,{[l.buttonDisabled]:a}),children:(0,m.jsx)(i,{className:n()(l.icon)})})]})})},g="Messahes_messages__wt3F-",x="Messahes_bottomBody__mO8TD",j="Messahes_bottomBodyHiden__SujgE",b="Messahes_arrowBottom__tUfpw",v=(0,_.Z)((0,m.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),f="Message_message__6jXwy",M="Message_messageOvner__-c7eq",N="Message_avatar__YZOh4",p="Message_body__aVEQH",C="Message_bodyOvner__cQtaq",w="Message_name__OP0Zh",S="Message_nameOvner__0IgH2",y="Message_messageText__wSul4",F=c.memo((e=>{let{message:s,photo:a,userName:t,userId:r}=e,c=(0,d.CG)((e=>e.auth.userId));return console.log(c),(0,m.jsxs)("div",{className:n()(f,{[M]:c===r}),children:[(0,m.jsx)("div",{className:N,children:(0,m.jsx)("img",{src:a,alt:"avatar"})}),(0,m.jsxs)("div",{className:n()(p,{[C]:c===r}),children:[(0,m.jsx)("div",{className:n()(w,{[S]:c===r}),children:t}),(0,m.jsx)("div",{className:y,children:s})]})]})})),H=()=>{const e=(0,d.TL)(),s=(0,d.CG)((e=>e.chat.messages)),a=(0,c.useRef)(null),[t,r]=(0,c.useState)(!0);return(0,c.useEffect)((()=>{e((0,h.pm)())}),[]),(0,c.useEffect)((()=>{a.current&&t&&(a.current.scrollTop=a.current.scrollHeight)}),[s,t]),(0,m.jsxs)("div",{className:g,ref:a,onScroll:e=>{const s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<30?!t&&r(!0):t&&r(!1)},children:[(0,m.jsx)("div",{onClick:()=>{r(!0)},className:n()(x,{[j]:t}),children:(0,m.jsx)(v,{className:b})}),s.map((e=>(0,m.jsx)(F,{...e})))]})},T=()=>(0,m.jsxs)("div",{className:t,children:[(0,m.jsx)(H,{}),(0,m.jsx)(u,{})]}),O=()=>(0,m.jsx)(T,{})}}]);
//# sourceMappingURL=50.a65bc4ed.chunk.js.map