"use strict";(self.webpackChunkreact_1=self.webpackChunkreact_1||[]).push([[868],{1868:(e,s,a)=>{a.r(s),a.d(s,{default:()=>O});const t={chat:"Chat_chat__RURbJ",messages:"Chat_messages__AFQob"};var r=a(9379),c=a(4858),o=a(5043);const l={form:"ChatForm_form__5XF+Y",formBody:"ChatForm_formBody__9As5v",messageArea:"ChatForm_messageArea__CerHm",button:"ChatForm_button__O8-cB",buttonDisabled:"ChatForm_buttonDisabled__SKi20",icon:"ChatForm_icon__XzG4I"};var m=a(8139),_=a.n(m),n=a(5874),i=a(8581),d=a(5503),h=a(579);const u=()=>{const e=(0,i.jL)(),s=(0,i.GV)(e=>e.chat.status),[a,t]=(0,o.useState)(!0),{register:m,handleSubmit:u,reset:g,formState:{errors:j}}=(0,c.mN)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("form",{onSubmit:u(s=>{const{message:a}=s;e((0,d._z)(a)),g({message:""}),t(!0)}),className:l.form,children:[(0,h.jsx)("div",{className:l.formBody,children:(0,h.jsx)("textarea",(0,r.A)((0,r.A)({onInput:e=>{let s=e.currentTarget;""!==s.value?t(!1):t(!0),s.style.height="auto",s.style.height=s.scrollHeight+"px"}},m("message",{required:"field is required"})),{},{className:_()(l.messageArea,{[l.error]:j.message}),placeholder:"Message"}))}),(0,h.jsx)("button",{disabled:"ready"!==s||a,className:_()(l.button,{[l.buttonDisabled]:a}),children:(0,h.jsx)(n.A,{className:_()(l.icon)})})]})})},g="Messahes_messages__wt3F-",j="Messahes_bottomBody__mO8TD",x="Messahes_bottomBodyHiden__SujgE",v="Messahes_arrowBottom__tUfpw";var b=a(8645);const f="Message_message__6jXwy",N="Message_messageOvner__-c7eq",M="Message_avatar__YZOh4",C="Message_body__aVEQH",p="Message_bodyOvner__cQtaq",y="Message_name__OP0Zh",F="Message_nameOvner__0IgH2",A="Message_messageText__wSul4";var S=a(1478);const H=o.memo(e=>{let{message:s,photo:a,userName:t,userId:r}=e,c=(0,i.GV)(e=>e.auth.userId);return(0,h.jsxs)("div",{className:_()(f,{[N]:c===r}),children:[(0,h.jsx)("div",{className:M,children:(0,h.jsx)("img",{src:null!==a&&void 0!==a?a:S,alt:"avatar"})}),(0,h.jsxs)("div",{className:_()(C,{[p]:c===r}),children:[(0,h.jsx)("div",{className:_()(y,{[F]:c===r}),children:t}),(0,h.jsx)("div",{className:A,children:s})]})]})}),w=o.memo(()=>{const e=(0,i.jL)(),s=(0,i.GV)(e=>e.chat.messages),a=(0,o.useRef)(null),[t,c]=(0,o.useState)(!0);return(0,o.useEffect)(()=>(e((0,d.Cy)()),()=>{e((0,d.qp)())}),[]),(0,o.useEffect)(()=>{a.current&&t&&(a.current.scrollTop=a.current.scrollHeight)},[s,t]),(0,h.jsxs)("div",{className:g,ref:a,onScroll:e=>{const s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<30?!t&&c(!0):t&&c(!1)},children:[(0,h.jsx)("div",{onClick:()=>{c(!0)},className:_()(j,{[x]:t}),children:(0,h.jsx)(b.A,{className:v})}),s.map(e=>(0,h.jsx)(H,(0,r.A)({},e),e.id))]})}),B=()=>(0,h.jsxs)("div",{className:t.chat,children:[(0,h.jsx)("div",{className:t.messages,children:(0,h.jsx)("div",{children:(0,h.jsx)(w,{})})}),(0,h.jsx)("div",{className:t.chatForm,children:(0,h.jsx)(u,{})})]}),O=()=>(0,h.jsx)(B,{})}}]);
//# sourceMappingURL=868.b463d326.chunk.js.map