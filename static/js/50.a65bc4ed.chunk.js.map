{"version":3,"file":"static/js/50.a65bc4ed.chunk.js","mappings":"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","sources":["webpack://react-1/./src/pages/chat/Chat.module.scss?06b5","webpack://react-1/./src/pages/chat/ChatForm/ChatForm.module.scss?47a1","../node_modules/@mui/icons-material/esm/Send.js","pages/chat/ChatForm/ChatForm.tsx","webpack://react-1/./src/pages/chat/Messages/Messahes.module.scss?47a9","../node_modules/@mui/icons-material/esm/ArrowDownward.js","webpack://react-1/./src/pages/chat/Messages/Message/Message.module.scss?c5fd","pages/chat/Messages/Message/Message.tsx","pages/chat/Messages/Messages.tsx","pages/chat/ChatPage.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"chat\":\"Chat_chat__RURbJ\"};","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"ChatForm_form__5XF+Y\",\"messageArea\":\"ChatForm_messageArea__CerHm\",\"button\":\"ChatForm_button__O8-cB\",\"buttonDisabled\":\"ChatForm_buttonDisabled__SKi20\",\"icon\":\"ChatForm_icon__XzG4I\"};","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z\"\n}), 'Send');","import { SubmitHandler, useForm } from \"react-hook-form\";\r\nimport { useState } from \"react\";\r\nimport stylles from './ChatForm.module.scss'\r\nimport classNames from \"classnames\";\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport { useAppDispatch, useAppSelector } from \"../../../redux/redux-store\";\r\nimport { sendMessage } from \"../../../redux/chat-reducer\";\r\n\r\ntype FormData = {\r\n    message: string\r\n}\r\n\r\nexport const ChatForm = () => {\r\n  const dispatch = useAppDispatch();\r\n  const status = useAppSelector(state => state.chat.status);\r\n  const [buttonIsDisabled, setButtonIsDisabled] = useState(true);\r\n\r\n  const {register, handleSubmit, reset, formState: {errors}} = useForm<FormData>();\r\n\r\n  const submit:SubmitHandler<FormData> = (formData) => {\r\n    const {message} = formData;\r\n    dispatch(sendMessage(message))\r\n    reset({message: ''})\r\n    setButtonIsDisabled(true)\r\n  }\r\n\r\n  const inputHandler = (e: React.FormEvent<HTMLTextAreaElement>) => {\r\n    let element = e.currentTarget;\r\n    if(element.value !== '') {\r\n      setButtonIsDisabled(false)\r\n    } else {\r\n      setButtonIsDisabled(true)\r\n    }\r\n    element.style.height = \"auto\"; // Скидаємо висоту\r\n    element.style.height = element.scrollHeight + \"px\"; // Встановлюємо нову висоту\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={handleSubmit(submit)} className={stylles.form}>\r\n        <div className={stylles.formBody}>\r\n          <textarea onInput={inputHandler} {...register('message', { required: 'field is required' })} className={classNames(stylles.messageArea, { [stylles.error]: errors.message })}\r\n          placeholder=\"Message\" ></textarea>\r\n        </div>\r\n        <button  disabled={status !== \"ready\" || buttonIsDisabled} className={classNames(stylles.button, { [stylles.buttonDisabled]: buttonIsDisabled })} > \r\n          <SendIcon className={classNames(stylles.icon)}/>\r\n        </button>\r\n      </form>\r\n    </>\r\n  )\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"messages\":\"Messahes_messages__wt3F-\",\"bottomBody\":\"Messahes_bottomBody__mO8TD\",\"bottomBodyHiden\":\"Messahes_bottomBodyHiden__SujgE\",\"arrowBottom\":\"Messahes_arrowBottom__tUfpw\"};","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z\"\n}), 'ArrowDownward');","// extracted by mini-css-extract-plugin\nexport default {\"message\":\"Message_message__6jXwy\",\"messageOvner\":\"Message_messageOvner__-c7eq\",\"avatar\":\"Message_avatar__YZOh4\",\"body\":\"Message_body__aVEQH\",\"bodyOvner\":\"Message_bodyOvner__cQtaq\",\"name\":\"Message_name__OP0Zh\",\"nameOvner\":\"Message_nameOvner__0IgH2\",\"messageText\":\"Message_messageText__wSul4\"};","import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport stylles from './Message.module.scss'\r\nimport { useAppSelector } from \"../../../../redux/redux-store\";\r\n\r\ntype MessageType = {\r\n    message: string,\r\n    photo: string,\r\n    userId: number,\r\n    userName: string\r\n  }\r\n  \r\n  \r\n  export const Message = React.memo(({message, photo, userName, userId}: MessageType) => {\r\n    let ovner = useAppSelector((state) => state.auth.userId);\r\n    console.log(ovner);\r\n    return (\r\n      <div className={classNames(stylles.message, {[stylles.messageOvner]: ovner === userId})}>\r\n        <div className={stylles.avatar}>\r\n          <img src={photo} alt=\"avatar\" />\r\n        </div>\r\n        <div className={classNames(stylles.body, {[stylles.bodyOvner]: ovner === userId})}>\r\n        <div className={classNames(stylles.name, {[stylles.nameOvner]: ovner === userId})}>{userName}</div>\r\n          <div className={stylles.messageText}>{message}</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  });\r\n  ","import React, { useEffect, useRef, useState } from \"react\";\r\nimport stylles from './Messahes.module.scss'\r\nimport classNames from \"classnames\";\r\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward';\r\nimport { useAppDispatch, useAppSelector } from \"../../../redux/redux-store\";\r\nimport { startMessagesListining } from \"../../../redux/chat-reducer\";\r\nimport { Message } from \"./Message/Message\";\r\n\r\n\r\nexport const Messages = () => {\r\n  const dispatch = useAppDispatch();\r\n  const messages = useAppSelector(state => state.chat.messages);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [isScrollActive, setIsScrollActive] = useState(true);\r\n\r\n  const scrollHandler = (e: React.UIEvent<HTMLDivElement>) => {\r\n    const element = e.currentTarget;\r\n\r\n    if(Math.abs(element.scrollHeight - element.scrollTop - element.clientHeight) < 30) {\r\n       !isScrollActive && setIsScrollActive(true)\r\n    } else {\r\n      isScrollActive && setIsScrollActive(false)\r\n    }\r\n  };\r\n\r\n  const bottomHandler = () => {\r\n    setIsScrollActive(true)\r\n  }\r\n  \r\n  useEffect(() => {\r\n    dispatch(startMessagesListining())\r\n  }, []);\r\n\r\n\r\n  useEffect(() => {\r\n    if(containerRef.current && isScrollActive) {\r\n      containerRef.current.scrollTop = containerRef.current.scrollHeight;\r\n    }\r\n  }, [messages, isScrollActive]);\r\n\r\n  return (\r\n    <div className={stylles.messages} ref={containerRef} onScroll={scrollHandler} >\r\n      <div onClick={bottomHandler} className={classNames(stylles.bottomBody, {[stylles.bottomBodyHiden]: isScrollActive})}>\r\n        <ArrowDownwardIcon className={stylles.arrowBottom} />\r\n      </div>\r\n      {\r\n        messages.map(m => <Message {...m} />)\r\n      }\r\n    </div>\r\n  )\r\n};\r\n\r\n\r\n","import stylles from './Chat.module.scss'\r\nimport { ChatForm } from './ChatForm/ChatForm';\r\nimport { Messages } from './Messages/Messages';\r\n\r\n\r\nconst ChatPage = () => {\r\n\r\n  return <Chat />\r\n};\r\n\r\n\r\nconst Chat = () => {\r\n\r\n  return (\r\n    <div className={stylles.chat}>\r\n      <Messages />\r\n      <ChatForm />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default ChatPage;\r\n\r\n"],"names":["createSvgIcon","_jsx","d","ChatForm","dispatch","useAppDispatch","status","useAppSelector","state","chat","buttonIsDisabled","setButtonIsDisabled","useState","register","handleSubmit","reset","formState","errors","useForm","_Fragment","children","_jsxs","onSubmit","formData","message","sendMessage","className","stylles","form","formBody","onInput","e","element","currentTarget","value","style","height","scrollHeight","required","classNames","messageArea","error","placeholder","disabled","button","buttonDisabled","SendIcon","icon","Message","React","_ref","photo","userName","userId","ovner","auth","console","log","src","alt","Messages","messages","containerRef","useRef","isScrollActive","setIsScrollActive","useEffect","startMessagesListining","current","scrollTop","ref","onScroll","Math","abs","clientHeight","onClick","bottomHandler","ArrowDownwardIcon","map","m","Chat","ChatPage"],"sourceRoot":""}